import{N as k,O as A,P as B,Q as M,g as u,o as R,h as V,i as r,d as s,w as i,G as z,R as O,f as l,b as E,T as N,c as F,r as X,U as Y,K as G,k as h,u as K,V as v}from"./vendor-3y-Tr9ie.js";import{_ as Q}from"./index-Cpc2chc0.js";const j={name:"StudentLayout",components:{Food:k,List:A,User:B,ChatSquare:M},setup(){const m=z(),e=K(),H=u(m.currentRoute.value.path),o=u(0),W=u({中央食堂:!0,沁园餐厅:!0,馨园餐厅:!1,仲园餐厅:!0,雅园餐厅:!0,服务点:!1}),D=u({中央食堂:{1:[{id:1,name:"特色炒菜",operatingHours:"10:30-13:30, 16:30-19:00",status:!0},{id:2,name:"面食档口",operatingHours:"10:30-13:30, 16:30-19:00",status:!0},{id:3,name:"盖浇饭",operatingHours:"10:30-13:30, 16:30-19:00",status:!1}],2:[{id:4,name:"清真档口",operatingHours:"10:30-13:30, 16:30-19:00",status:!0},{id:5,name:"粥品档口",operatingHours:"07:00-09:00",status:!1}],3:[{id:6,name:"自选档口",operatingHours:"10:30-13:30, 16:30-19:00",status:!0}]},沁园餐厅:{1:[{id:7,name:"快餐",operatingHours:"10:30-13:30, 16:30-19:00",status:!0},{id:8,name:"小炒",operatingHours:"10:30-13:30, 16:30-19:00",status:!0}],2:[{id:9,name:"面档",operatingHours:"10:30-13:30, 16:30-19:00",status:!0}]}}),p=u({中央食堂:{type:"warning",text:"较拥挤"},沁园餐厅:{type:"success",text:"空闲"},馨园餐厅:{type:"info",text:"已打烊"},仲园餐厅:{type:"danger",text:"拥挤"},雅园餐厅:{type:"success",text:"空闲"},服务点:{type:"info",text:"已打烊"}}),g=u({1:15,2:8,3:12,4:10,5:6,6:20,7:8,8:12,9:5}),x=t=>W.value[(t==null?void 0:t.name)||t]||!1,_=(t,n)=>{var d;return((d=D.value[t])==null?void 0:d[n])||[]},c=t=>(t==null?void 0:t.status)??!1,y=t=>{var n;return((n=p.value[t])==null?void 0:n.type)||"info"},T=t=>{var n;return((n=p.value[t])==null?void 0:n.text)||"未知"},C=t=>g.value[t]||0;v("isCanteenOpen",x),v("getFloorWindows",_),v("isWindowOpen",c),v("getCrowdLevelType",y),v("getCrowdLevelText",T),v("getWindowDishCount",C);const w=t=>(t.startsWith("/student/")||(t="/student"+t),e.path===t),b=t=>{t.startsWith("/student/")||(t="/student"+t),m.push(t)};R(()=>{const t=window.statusBarHeight||0;document.documentElement.style.setProperty("--status-bar-height",`${t}px`);const n=window.safeAreaInsetBottom||0;document.documentElement.style.setProperty("--safe-area-inset-bottom",`${n}px`)});const a=(t,n)=>{o.value+=1,O.fromTo(t,{opacity:0,scale:.98,x:40},{opacity:1,scale:1,x:0,duration:.6,ease:"power3.out",onComplete:n})},I=(t,n)=>{O.to(t,{opacity:0,scale:.98,x:-40,duration:.4,ease:"power3.in",onComplete:n}),o.value-=1},L=u({x:0,y:0}),S=u({x:0,y:0}),U=50,q=50,f=["/student/home","/student/recommendations","/student/orders","/student/profile"],P=()=>f.findIndex(t=>e.path===t);return{isActive:w,navigateTo:b,activeTab:H,Food:k,List:A,User:B,ChatSquare:M,enter:a,leave:I,transitionDepth:o,handleTouchStart:t=>{L.value={x:t.touches[0].clientX,y:t.touches[0].clientY}},handleTouchMove:t=>{S.value={x:t.touches[0].clientX,y:t.touches[0].clientY}},handleTouchEnd:()=>{const t=S.value.x-L.value.x,n=Math.abs(S.value.y-L.value.y),d=P();n>q||Math.abs(t)>U&&(t>0&&d>0?m.push(f[d-1]):t<0&&d<f.length-1&&m.push(f[d+1]))}}}},J={class:"layout-root"},Z={class:"student-layout"},$={class:"nav-buttons"};function tt(m,e,H,o,W,D){const p=l("el-header"),g=l("router-view"),x=l("el-main"),_=l("Food"),c=l("el-icon"),y=l("ChatSquare"),T=l("List"),C=l("User"),w=l("el-footer"),b=l("el-container");return E(),V("div",J,[e[12]||(e[12]=r("div",{class:"status-bar"},null,-1)),r("div",Z,[s(b,null,{default:i(()=>[s(p,null,{default:i(()=>e[7]||(e[7]=[r("div",{class:"header-title"},"GUET智慧食堂",-1)])),_:1}),s(x,null,{default:i(()=>[r("div",{class:"touch-container",onTouchstart:e[0]||(e[0]=(...a)=>o.handleTouchStart&&o.handleTouchStart(...a)),onTouchmove:e[1]||(e[1]=(...a)=>o.handleTouchMove&&o.handleTouchMove(...a)),onTouchend:e[2]||(e[2]=(...a)=>o.handleTouchEnd&&o.handleTouchEnd(...a))},[s(g,null,{default:i(({Component:a})=>[s(N,{name:"page",mode:"out-in",onEnter:o.enter,onLeave:o.leave,css:!1},{default:i(()=>[(E(),F(G,{include:["DishList","OrderList"]},[(E(),F(X(a),{class:"page-container",style:Y({zIndex:o.transitionDepth})},null,8,["style"]))],1024))]),_:2},1032,["onEnter","onLeave"])]),_:1})],32)]),_:1}),s(w,{height:"55px",class:"footer"},{default:i(()=>[r("div",$,[r("div",{class:h(["nav-button",{active:o.isActive("/home")}]),onClick:e[3]||(e[3]=a=>o.navigateTo("/home"))},[s(c,null,{default:i(()=>[s(_)]),_:1}),e[8]||(e[8]=r("div",{class:"button-text"},"首页",-1))],2),r("div",{class:h(["nav-button",{active:o.isActive("/recommendations")}]),onClick:e[4]||(e[4]=a=>o.navigateTo("/recommendations"))},[s(c,null,{default:i(()=>[s(y)]),_:1}),e[9]||(e[9]=r("div",{class:"button-text"},"推荐广场",-1))],2),r("div",{class:h(["nav-button",{active:o.isActive("/orders")}]),onClick:e[5]||(e[5]=a=>o.navigateTo("/orders"))},[s(c,null,{default:i(()=>[s(T)]),_:1}),e[10]||(e[10]=r("div",{class:"button-text"},"订单",-1))],2),r("div",{class:h(["nav-button",{active:o.isActive("/profile")}]),onClick:e[6]||(e[6]=a=>o.navigateTo("/profile"))},[s(c,null,{default:i(()=>[s(C)]),_:1}),e[11]||(e[11]=r("div",{class:"button-text"},"我的",-1))],2)])]),_:1})]),_:1})])])}const rt=Q(j,[["render",tt],["__scopeId","data-v-beca9e9d"]]);export{rt as default};
